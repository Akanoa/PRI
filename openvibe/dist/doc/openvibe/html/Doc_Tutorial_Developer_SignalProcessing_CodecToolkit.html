<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OpenViBE documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<!-- <link href="tabs.css" rel="stylesheet" type="text/css"> -->
</head>
<body>
<div id="main">
	<div id="title">
		<center>
		<a name="page-top"></a>
		<table width=95%>
			<tr>
				<td><a href="http://openvibe.inria.fr" class="leaving-link" onclick="window.open(this.href,'openvibe-software'); return false;"><img src="logo.png" /></a></td>
				<td width=100%>OpenViBE Documentation</td>
			</tr>
		</table>
		</center>
	</div>
	<div id="menu">
		<div id="menu-content">
			<ul>
				<li><a href="index.html">OpenViBE Documentation</a></li>
			</ul>
			<div class="menu-title">Doxygen</div>
			<ul>
				<!-- <li><a href="pages.html">Related</a></li> -->
				<li><a href="modules.html">Modules</a></li>
				<li><a href="namespaces.html">Namespaces</a></li>
				<li><a href="annotated.html">Class List</a>
				<li><a href="classes.html">Class Index</a>
				<li><a href="hierarchy.html">Class Hierarchy</a>
				<!-- <li><a href="files.html">Files (buggy)</a></li> -->
			</ul>
			<div class="menu-title">Quick Access</div>
			<ul>
				<li><a href="http://openvibe.inria.fr/start" class="leaving-link">Video Tutorials</a></li>
				<li><a href="http://openvibe.inria.fr/faq">FAQ</a></li>
				<li><a href="http://openvibe.inria.fr/license">Licence</a></li>
				<li><a href="http://openvibe.inria.fr/build-instructions/">Build Instructions</a></li>
				<li><a href="http://openvibe.inria.fr/documentation-index/#User+Documentation">User Doc</a></li>
				<li><a href="http://openvibe.inria.fr/documentation-index/#Developer+Documentation">Developer Doc</a></li>
				<li><a href="Doc_BoxAlgorithms.html">Exisiting Boxes</a></li>
			</ul>
			<div class="menu-title">Contact</div>
			<ul>
				<li><a href="http://openvibe.inria.fr" class="leaving-link" onclick="window.open(this.href,'openvibe-software'); return false;">Software Home</a></li>
				<li><a href="http://openvibe.inria.fr/forum" class="leaving-link" onclick="window.open(this.href,'openvibe-forum'); return false;">Forum</a></li>
				<li><a href="https://gforge.inria.fr/projects/openvibe" class="leaving-link" onclick="window.open(this.href,'openvibe-forge'); return false;">INRIA gForge</a></li>
				<li><a href="https://gforge.inria.fr/mail/?group_id=276" class="leaving-link" onclick="window.open(this.href,'openvibe-forge'); return false;">Mailing Lists</a></li>
				<li><a href="http://openvibe.inria.fr/tracker" class="leaving-link" onclick="window.open(this.href,'openvibe-tracker'); return false;">Bug Tracker</a></li>
				<li><a href="http://www.irisa.fr/bunraku/OpenViBE/wiki/index.php?title=Main_Page" class="leaving-link" onclick="window.open(this.href,'openvibe-wiki'); return false;">Research Project</a></li>
				<li><b>IRC</b> : <span style="font-size: x-small; font-style: italic;">#openvibe</span> on <span style="font-size: x-small; font-style: italic;">irc.freenode.net</span></li>
				<li><b>Project Leader</b> : Anatole L&eacute;cuyer, Inria <span style="font-size: x-small; font-style: italic;">(anatole dot lecuyer at inria dot fr)</span></li>
				<li><b>Lead Software Engineer</b> : Laurent Bonnet, Inria <span style="font-size: x-small; font-style: italic;">(laurent dot bonnet at inria dot fr)</span></li>
			</ul>
			<div class="menu-title">Share this</div>
			<ul><li><span style="font-size: x-small; font-style: italic;">This documentation is licenced under <b>CC-BY-SA</b></span></li></ul>
			<td><a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode" class="leaving-link" onclick="window.open(this.href,'cc-by-sa'); return false;"><img src="cc-by-sa.png" /></a></td>
			<br>
			<div class="menu-title">Search</div>
			<form action="search.php" method="get" id="search">
				<fieldset>
					<input class="search" type="text" name="q" value="Quick Search..." onfocus="this.value='';" />
				</fieldset>
			</form>
		</div>
	</div>
	<div class="content-container">
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="Doc_DeveloperDocumentation.html">Developer Documentation</a></li><li class="navelem"><a class="el" href="Doc_DeveloperTutorials.html">Developer tutorials</a></li><li class="navelem"><a class="el" href="Doc_DeveloperDocumentation_Plugin.html">Developing a Plugin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The Codec Toolkit: decode and encode faster </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="important"> This documentation page is deprecated since <a class="el" href="namespaceOpenViBE.html" title="Main OpenViBE namespace.">OpenViBE</a> 0.12.0 (oct 2011), and won't be maintained.  The new page can be found  <a href="http://openvibe.inria.fr/tutorial-1-implementing-a-signal-processing-box/"> here </a> .</div><ul>
<li><b>NB:</b> Document based on <b> <a class="el" href="namespaceOpenViBE.html" title="Main OpenViBE namespace.">OpenViBE</a> 0.10.0 </b> (31-march-2011).</li>
</ul>
<p>In this tutorial you will learn how to use the <a class="el" href="namespaceOpenViBE.html" title="Main OpenViBE namespace.">OpenViBE</a> Codec toolkit. These template classes can be used to implement new boxes faster, as you will always have to decode some input streams and encode output streams. No more identifiers for input, output and triggers as you only have high level methods. <br/>
 </p>
<div class="important"> It is recommended to do the <a class="el" href="Doc_Tutorial_Developer_SignalProcessing_IntroductionPage.html">Previous tutorials</a> before this one. <br/>
 Writing new plugins requires to know how the algorithm mechanism works, and the Codec Toolkit masks a big part of this mechanism for the decoders and encoders algorithms. </div><p><br/>
</p>
<p>Let's go on with a concrete use case : a simple box that reads any kind of inputs, extract some information from it, then outputs unmodified data. The code of this Codec Toolkit testbox is available on the SVN repository, under <em>openvibe-plugins/samples/trunc/src</em>. The box irself is available in the Designer in the category <em>Signal Processing/Samples</em>.</p>
<h1><a class="anchor" id="Doc_Tutorial_Developer_SignalProcessing_CodecToolkit_Header"></a>
Box algorithm definition</h1>
<p>Here is the file containing the box algorithm definition, we will detail each line of the file later on.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef __OpenViBEPlugins_TestCodecToolkit_H__</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __OpenViBEPlugins_TestCodecToolkit_H__</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &quot;ovp_defines.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;openvibe/ov_all.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;openvibe-toolkit/ovtk_all.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define OVP_ClassId_TestCodecToolkit     OpenViBE::CIdentifier(0x330E3A87, 0x31565BA6)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define OVP_ClassId_TestCodecToolkitDesc OpenViBE::CIdentifier(0x376A4712, 0x1AA65567)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keyword">namespace </span>OpenViBEPlugins</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">namespace </span>Samples</div>
<div class="line">        {</div>
<div class="line">                <span class="keyword">class </span>CTestCodecToolkit : <span class="keyword">public</span> OpenViBEToolkit::TBoxAlgorithm &lt; OpenViBE::Plugins::IBoxAlgorithm &gt;</div>
<div class="line">                {</div>
<div class="line">                <span class="keyword">public</span>:</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <span class="keywordtype">void</span> release(<span class="keywordtype">void</span>) { <span class="keyword">delete</span> <span class="keyword">this</span>; }</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> initialize(<span class="keywordtype">void</span>);</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> uninitialize(<span class="keywordtype">void</span>);</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> processInput(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">OpenViBE::uint32</a> ui32InputIndex);</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> process(<span class="keywordtype">void</span>);</div>
<div class="line"></div>
<div class="line">                        _IsDerivedFromClass_Final_(OpenViBEToolkit::TBoxAlgorithm &lt; OpenViBE::Plugins::IBoxAlgorithm &gt;, OVP_ClassId_TestCodecToolkit);</div>
<div class="line"></div>
<div class="line">                <span class="keyword">protected</span>:</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt; m_oStreamedMatrixDecoder;</div>
<div class="line">                        OpenViBEToolkit::TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt; m_oStreamedMatrixEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt; m_oChannelLocalisationDecoder;</div>
<div class="line">                        OpenViBEToolkit::TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt; m_oChannelLocalisationEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TFeatureVectorDecoder &lt; CTestCodecToolkit &gt; m_oFeatureVectorDecoder;</div>
<div class="line">                        OpenViBEToolkit::TFeatureVectorEncoder &lt; CTestCodecToolkit &gt; m_oFeatureVectorEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TSpectrumDecoder &lt; CTestCodecToolkit &gt; m_oSpectrumDecoder;</div>
<div class="line">                        OpenViBEToolkit::TSpectrumEncoder &lt; CTestCodecToolkit &gt; m_oSpectrumEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TSignalDecoder &lt; CTestCodecToolkit &gt; m_oSignalDecoder;</div>
<div class="line">                        OpenViBEToolkit::TSignalEncoder &lt; CTestCodecToolkit &gt; m_oSignalEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TStimulationDecoder &lt; CTestCodecToolkit &gt; m_oStimDecoder;</div>
<div class="line">                        OpenViBEToolkit::TStimulationEncoder &lt; CTestCodecToolkit &gt; m_oStimEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TExperimentInformationDecoder &lt; CTestCodecToolkit &gt; m_oExperimentInformationDecoder;</div>
<div class="line">                        OpenViBEToolkit::TExperimentInformationEncoder &lt; CTestCodecToolkit &gt; m_oExperimentInformationEncoder;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">/* One decoder per input. This vector makes easy the decoding in one iteration over the inputs. */</span></div>
<div class="line">                        std::vector &lt; OpenViBEToolkit::TDecoder &lt; CTestCodecToolkit &gt;*&gt; m_vDecoders;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">/* One encoder per output This vector makes easy the encoding in one iteration over the outputs. */</span></div>
<div class="line">                        std::vector &lt; OpenViBEToolkit::TEncoder &lt; CTestCodecToolkit &gt;*&gt; m_vEncoders;</div>
<div class="line">                };</div>
<div class="line"></div>
<div class="line">                <span class="keyword">class </span>CTestCodecToolkitDesc : <span class="keyword">public</span> <a class="code" href="classOpenViBE_1_1Plugins_1_1IBoxAlgorithmDesc.html" title="Box algorithm plugin descriptorThis class should be derived by any plugin developper in order to desc...">OpenViBE::Plugins::IBoxAlgorithmDesc</a></div>
<div class="line">                {</div>
<div class="line">                <span class="keyword">public</span>:</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <span class="keywordtype">void</span> release(<span class="keywordtype">void</span>) { }</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getName(<span class="keywordtype">void</span>)<span class="keyword"> const                </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;Codec Toolkit testbox&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getAuthorName(<span class="keywordtype">void</span>)<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;Laurent Bonnet&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getAuthorCompanyName(<span class="keywordtype">void</span>)<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;INRIA&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getShortDescription(<span class="keywordtype">void</span>)<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;Sample box to test the codec toolkit. Identity (input = output).&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getDetailedDescription(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getCategory(<span class="keywordtype">void</span>)<span class="keyword"> const            </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;Samples&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getVersion(<span class="keywordtype">void</span>)<span class="keyword"> const             </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;1.0&quot;</span>); }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a> getStockItemName(<span class="keywordtype">void</span>)<span class="keyword"> const       </span>{ <span class="keywordflow">return</span> <a class="code" href="classOpenViBE_1_1CString.html" title="String class to avoid std::string in the interfaceThis class helps avoiding std::string being present...">OpenViBE::CString</a>(<span class="stringliteral">&quot;gtk-execute&quot;</span>); }</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1CIdentifier.html" title="Globally used identifiaction classThis class is the basic class to use in order to identify objects i...">OpenViBE::CIdentifier</a> getCreatedClass(<span class="keywordtype">void</span>)<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> OVP_ClassId_TestCodecToolkit; }</div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="classOpenViBE_1_1Plugins_1_1IPluginObject.html" title="Base class for plugin objectThis class is the base class for all the concrete plugin classes that ext...">OpenViBE::Plugins::IPluginObject</a>* create(<span class="keywordtype">void</span>)       { <span class="keywordflow">return</span> <span class="keyword">new</span> OpenViBEPlugins::Samples::CTestCodecToolkit; }</div>
<div class="line"></div>
<div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> getBoxPrototype(</div>
<div class="line">                                <a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html" title="OpenViBE box prototypeThis class is used by a plugin algorithm descriptor to let the OpenViBE platfor...">OpenViBE::Kernel::IBoxProto</a>&amp; rBoxAlgorithmPrototype)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">                        </span>{</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Streamed Matrix&quot;</span>,  OV_TypeId_StreamedMatrix);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Streamed Matrix&quot;</span>, OV_TypeId_StreamedMatrix);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Channel Localisation&quot;</span>,  OV_TypeId_ChannelLocalisation);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Channel Localisation&quot;</span>, OV_TypeId_ChannelLocalisation);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Feature Vector&quot;</span>,  OV_TypeId_FeatureVector);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Feature Vector&quot;</span>, OV_TypeId_FeatureVector);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Spectrum&quot;</span>,  OV_TypeId_Spectrum);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Spectrum&quot;</span>, OV_TypeId_Spectrum);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Signal&quot;</span>,  OV_TypeId_Signal);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Signal&quot;</span>, OV_TypeId_Signal);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Stimulations&quot;</span>,  OV_TypeId_Stimulations);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Stimulations&quot;</span>, OV_TypeId_Stimulations);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;XP info&quot;</span>,  OV_TypeId_ExperimentationInformation);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;XP info&quot;</span>, OV_TypeId_ExperimentationInformation);</div>
<div class="line"></div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                        }</div>
<div class="line"></div>
<div class="line">                        _IsDerivedFromClass_Final_(<a class="code" href="classOpenViBE_1_1Plugins_1_1IBoxAlgorithmDesc.html" title="Box algorithm plugin descriptorThis class should be derived by any plugin developper in order to desc...">OpenViBE::Plugins::IBoxAlgorithmDesc</a>, OVP_ClassId_TestCodecToolkitDesc);</div>
<div class="line">                };</div>
<div class="line">        };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif // __OpenViBEPlugins_TestCodecToolkit_H__</span></div>
</div><!-- fragment --> <p>As you already know the basics, let's move on to the codec declarations: <div class="fragment"><div class="line">                        OpenViBEToolkit::TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt; m_oStreamedMatrixDecoder;</div>
<div class="line">                        OpenViBEToolkit::TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt; m_oStreamedMatrixEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt; m_oChannelLocalisationDecoder;</div>
<div class="line">                        OpenViBEToolkit::TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt; m_oChannelLocalisationEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TFeatureVectorDecoder &lt; CTestCodecToolkit &gt; m_oFeatureVectorDecoder;</div>
<div class="line">                        OpenViBEToolkit::TFeatureVectorEncoder &lt; CTestCodecToolkit &gt; m_oFeatureVectorEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TSpectrumDecoder &lt; CTestCodecToolkit &gt; m_oSpectrumDecoder;</div>
<div class="line">                        OpenViBEToolkit::TSpectrumEncoder &lt; CTestCodecToolkit &gt; m_oSpectrumEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TSignalDecoder &lt; CTestCodecToolkit &gt; m_oSignalDecoder;</div>
<div class="line">                        OpenViBEToolkit::TSignalEncoder &lt; CTestCodecToolkit &gt; m_oSignalEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TStimulationDecoder &lt; CTestCodecToolkit &gt; m_oStimDecoder;</div>
<div class="line">                        OpenViBEToolkit::TStimulationEncoder &lt; CTestCodecToolkit &gt; m_oStimEncoder;</div>
<div class="line"></div>
<div class="line">                        OpenViBEToolkit::TExperimentInformationDecoder &lt; CTestCodecToolkit &gt; m_oExperimentInformationDecoder;</div>
<div class="line">                        OpenViBEToolkit::TExperimentInformationEncoder &lt; CTestCodecToolkit &gt; m_oExperimentInformationEncoder;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">/* One decoder per input. This vector makes easy the decoding in one iteration over the inputs. */</span></div>
<div class="line">                        std::vector &lt; OpenViBEToolkit::TDecoder &lt; CTestCodecToolkit &gt;*&gt; m_vDecoders;</div>
<div class="line"></div>
<div class="line">                        <span class="comment">/* One encoder per output This vector makes easy the encoding in one iteration over the outputs. */</span></div>
<div class="line">                        std::vector &lt; OpenViBEToolkit::TEncoder &lt; CTestCodecToolkit &gt;*&gt; m_vEncoders;</div>
</div><!-- fragment --></p>
<p>Every codec is a template class that needs the box class from which it will ask for the dynamic context (here, CTestCodecToolkit). We also declare two vectors, one will contain all encoders and the other all decoders. We will then be able to iterate over all codecs easily. All decoders inherits from the class <code>OpenViBEToolkit::TDecoder</code>, and all encoders from <code>OpenViBEToolkit::TEncoder</code>.</p>
<p>In the box prototype we declare all possible input and output types: <div class="fragment"><div class="line">                        <span class="keyword">virtual</span> <a class="code" href="namespaceOpenViBE.html#af29b166bf5fea7f0bbc07f7014a8c6b5" title="Boolean.">OpenViBE::boolean</a> getBoxPrototype(</div>
<div class="line">                                <a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html" title="OpenViBE box prototypeThis class is used by a plugin algorithm descriptor to let the OpenViBE platfor...">OpenViBE::Kernel::IBoxProto</a>&amp; rBoxAlgorithmPrototype)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">                        </span>{</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Streamed Matrix&quot;</span>,  OV_TypeId_StreamedMatrix);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Streamed Matrix&quot;</span>, OV_TypeId_StreamedMatrix);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Channel Localisation&quot;</span>,  OV_TypeId_ChannelLocalisation);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Channel Localisation&quot;</span>, OV_TypeId_ChannelLocalisation);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Feature Vector&quot;</span>,  OV_TypeId_FeatureVector);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Feature Vector&quot;</span>, OV_TypeId_FeatureVector);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Spectrum&quot;</span>,  OV_TypeId_Spectrum);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Spectrum&quot;</span>, OV_TypeId_Spectrum);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Signal&quot;</span>,  OV_TypeId_Signal);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Signal&quot;</span>, OV_TypeId_Signal);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;Stimulations&quot;</span>,  OV_TypeId_Stimulations);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;Stimulations&quot;</span>, OV_TypeId_Stimulations);</div>
<div class="line"></div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#acc681d41da652463aa011dfaac32bcfb" title="Adds an input to the box.">addInput</a>  (<span class="stringliteral">&quot;XP info&quot;</span>,  OV_TypeId_ExperimentationInformation);</div>
<div class="line">                                rBoxAlgorithmPrototype.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxProto.html#a3b0ae138e8cc8d78adde3af9fc7e07cd" title="Adds an output to the box.">addOutput</a> (<span class="stringliteral">&quot;XP info&quot;</span>, OV_TypeId_ExperimentationInformation);</div>
<div class="line"></div>
<div class="line">                                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                        }</div>
</div><!-- fragment --> We will ensure that the i-th input is decoded by the i-th decoder in the vector (and same for outputs and encoders). Now let's move on to the implementation.</p>
<h1><a class="anchor" id="Doc_Tutorial_Developer_SignalProcessing_CodecToolkit_Implementation"></a>
Box algorithm implementation</h1>
<p>Here is the file containing the box algorithm implementation, we will detail each line of the file later on.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;ovpCTestCodecToolkit.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>OpenViBE;</div>
<div class="line"><span class="keyword">using namespace </span>OpenViBE::Kernel;</div>
<div class="line"><span class="keyword">using namespace </span>OpenViBE::Plugins;</div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>OpenViBEPlugins;</div>
<div class="line"><span class="keyword">using namespace </span>OpenViBEPlugins::Samples;</div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>OpenViBEToolkit;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::initialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// You can also manipulate pointers to Codec object. Creation and destruction must be done like that :  </span></div>
<div class="line">        TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt; * l_oStreamedMatrixDecoder = <span class="keyword">new</span> TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oStreamedMatrixDecoder;</div>
<div class="line">        TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt; * l_oStreamedMatrixEncoder = <span class="keyword">new</span> TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oStreamedMatrixEncoder;</div>
<div class="line"></div>
<div class="line">        TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt; * l_oChannelLocalisationDecoder = <span class="keyword">new</span> TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oChannelLocalisationDecoder;</div>
<div class="line">        TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt; * l_oChannelLocalisationEncoder = <span class="keyword">new</span> TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oChannelLocalisationEncoder;</div>
<div class="line"></div>
<div class="line">        TFeatureVectorDecoder &lt; CTestCodecToolkit &gt; * l_oTFeatureVectorDecoder = <span class="keyword">new</span> TFeatureVectorDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTFeatureVectorDecoder;</div>
<div class="line">        TFeatureVectorEncoder &lt; CTestCodecToolkit &gt; * l_oTFeatureVectorEncoder = <span class="keyword">new</span> TFeatureVectorEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTFeatureVectorEncoder;</div>
<div class="line"></div>
<div class="line">        TSpectrumDecoder &lt; CTestCodecToolkit &gt; * l_oTSpectrumDecoder = <span class="keyword">new</span> TSpectrumDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSpectrumDecoder;</div>
<div class="line">        TSpectrumEncoder &lt; CTestCodecToolkit &gt; * l_oTSpectrumEncoder = <span class="keyword">new</span> TSpectrumEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSpectrumEncoder;</div>
<div class="line"></div>
<div class="line">        TSignalDecoder &lt; CTestCodecToolkit &gt; * l_oTSignalDecoder = <span class="keyword">new</span> TSignalDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSignalDecoder;</div>
<div class="line">        TSignalEncoder &lt; CTestCodecToolkit &gt; * l_oTSignalEncoder = <span class="keyword">new</span> TSignalEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSignalEncoder;</div>
<div class="line"></div>
<div class="line">        TStimulationDecoder &lt; CTestCodecToolkit &gt; * l_oTStimulationDecoder = <span class="keyword">new</span> TStimulationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTStimulationDecoder;</div>
<div class="line">        TStimulationEncoder &lt; CTestCodecToolkit &gt; * l_oTStimulationEncoder = <span class="keyword">new</span> TStimulationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTStimulationEncoder;</div>
<div class="line"></div>
<div class="line">        TExperimentInformationDecoder &lt; CTestCodecToolkit &gt; * l_oTExperimentInformationDecoder = <span class="keyword">new</span> TExperimentInformationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTExperimentInformationDecoder;</div>
<div class="line">        TExperimentInformationEncoder &lt; CTestCodecToolkit &gt; * l_oTExperimentInformationEncoder = <span class="keyword">new</span> TExperimentInformationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTExperimentInformationEncoder;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//-----------------------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">        m_oStreamedMatrixDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStreamedMatrixEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStreamedMatrixEncoder.getInputMatrix().setReferenceTarget(m_oStreamedMatrixDecoder.getOutputMatrix());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oStreamedMatrixDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oStreamedMatrixEncoder);</div>
<div class="line"></div>
<div class="line">        m_oChannelLocalisationDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oChannelLocalisationEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oChannelLocalisationEncoder.getInputMatrix().setReferenceTarget(m_oChannelLocalisationDecoder.getOutputMatrix());</div>
<div class="line">        m_oChannelLocalisationEncoder.getInputDynamic().setReferenceTarget(m_oChannelLocalisationDecoder.getOutputDynamic());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oChannelLocalisationDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oChannelLocalisationEncoder);</div>
<div class="line"></div>
<div class="line">        m_oFeatureVectorDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oFeatureVectorEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oFeatureVectorEncoder.getInputMatrix().setReferenceTarget(m_oFeatureVectorDecoder.getOutputMatrix());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oFeatureVectorDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oFeatureVectorEncoder);</div>
<div class="line"></div>
<div class="line">        m_oSpectrumDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSpectrumEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSpectrumEncoder.getInputMatrix().setReferenceTarget(m_oSpectrumDecoder.getOutputMatrix());</div>
<div class="line">        m_oSpectrumEncoder.getInputMinMaxFrequencyBands().setReferenceTarget(m_oSpectrumDecoder.getOutputMinMaxFrequencyBands());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oSpectrumDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oSpectrumEncoder);</div>
<div class="line"></div>
<div class="line">        m_oSignalDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSignalEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSignalEncoder.getInputMatrix().setReferenceTarget(m_oSignalDecoder.getOutputMatrix());</div>
<div class="line">        m_oSignalEncoder.getInputSamplingRate().setReferenceTarget(m_oSignalDecoder.getOutputSamplingRate());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oSignalDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oSignalEncoder);</div>
<div class="line"></div>
<div class="line">        m_oStimDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStimEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStimEncoder.getInputStimulationSet().setReferenceTarget(m_oStimDecoder.getOutputStimulationSet());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oStimDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oStimEncoder);</div>
<div class="line"></div>
<div class="line">        m_oExperimentInformationDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oExperimentInformationEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oExperimentInformationEncoder.getInputExperimentIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputExperimentIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputExperimentDate().setReferenceTarget(m_oExperimentInformationDecoder.getOutputExperimentDate());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectName());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectAge().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectAge());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectGender().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectGender());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputLaboratoryIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputLaboratoryIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputLaboratoryName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputLaboratoryName());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputTechnicianIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputTechnicianIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputTechnicianName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputTechnicianName());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oExperimentInformationDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oExperimentInformationEncoder);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::uninitialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">for</span>(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">uint32</a> i = 0; i&lt; m_vDecoders.size(); i++)</div>
<div class="line">        {</div>
<div class="line">                m_vDecoders[i]-&gt;uninitialize();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span>(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">uint32</a> i = 0; i&lt; m_vEncoders.size(); i++)</div>
<div class="line">        {</div>
<div class="line">                m_vEncoders[i]-&gt;uninitialize();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::processInput(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">uint32</a> ui32InputIndex)</div>
<div class="line">{</div>
<div class="line">        this-&gt;getBoxAlgorithmContext()-&gt;markAlgorithmAsReadyToProcess();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::process(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxIO.html" title="Main OpenViBE box interface to communicate with the kernelThis context allows the object which uses i...">IBoxIO</a>&amp; l_rDynamicBoxContext=this-&gt;getDynamicBoxContext();</div>
<div class="line">        <a class="code" href="classOpenViBE_1_1Kernel_1_1IBox.html" title="Complete OpenViBE box interfaceThis interface can be used in order to fully describe an OpenViBE blac...">IBox</a>&amp; l_rStaticBoxContext=this-&gt;getStaticBoxContext();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">uint32</a> i=0; i&lt;l_rStaticBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBox.html#af139e8def6ad7c417a506174bebc54d9" title="Gets the number of inputs for this box.">getInputCount</a>(); i++)</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordflow">for</span>(<a class="code" href="namespaceOpenViBE.html#a1134b580f8da4de94ca6b1de4d37975e" title="32 bits unsigned integer">uint32</a> j=0; j&lt;l_rDynamicBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxIO.html#ac92f046ed273ed5329ef1d6240b70d12" title="Gets the number of pending chunks for an input.">getInputChunkCount</a>(i); j++)</div>
<div class="line">                {</div>
<div class="line">                        <span class="comment">// we can manipulate decoders and encoders without knowing their types</span></div>
<div class="line">                        m_vDecoders[i]-&gt;decode(i,j);</div>
<div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isHeaderReceived())</div>
<div class="line">                        {</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeHeader(i);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isBufferReceived())</div>
<div class="line">                        {</div>
<div class="line">                                <span class="comment">//let&#39;s check what is inside the buffer</span></div>
<div class="line">                                <a class="code" href="classOpenViBE_1_1CIdentifier.html" title="Globally used identifiaction classThis class is the basic class to use in order to identify objects i...">CIdentifier</a> l_oInputType;</div>
<div class="line">                                l_rStaticBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBox.html#a24447101062fd9ff1154a5331d92b5b5" title="Gets an input type identifier.">getInputType</a>(i, l_oInputType);</div>
<div class="line">                                <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_StreamedMatrix)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IMatrix.html" title="Basic OpenViBE matrix interface.">IMatrix</a>* l_pMatrix = m_oStreamedMatrixDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Streamed Matrix buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;<a class="code" href="classOpenViBE_1_1IMatrix.html#abf0864b64e042c1cbec5d35a8f30c8e8" title="Gets the total number of elements in the matrix.">getBufferElementCount</a>()&lt;&lt;<span class="stringliteral">&quot; elements in buffer).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_ChannelLocalisation)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IMatrix.html" title="Basic OpenViBE matrix interface.">IMatrix</a>* l_pMatrix = m_oChannelLocalisationDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Channel localisation buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;<a class="code" href="classOpenViBE_1_1IMatrix.html#abf0864b64e042c1cbec5d35a8f30c8e8" title="Gets the total number of elements in the matrix.">getBufferElementCount</a>()&lt;&lt;<span class="stringliteral">&quot; elements in buffer).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_FeatureVector)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IMatrix.html" title="Basic OpenViBE matrix interface.">IMatrix</a>* l_pMatrix = m_oFeatureVectorDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Feature Vector buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;<a class="code" href="classOpenViBE_1_1IMatrix.html#abf0864b64e042c1cbec5d35a8f30c8e8" title="Gets the total number of elements in the matrix.">getBufferElementCount</a>()&lt;&lt;<span class="stringliteral">&quot; features in vector).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Spectrum)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IMatrix.html" title="Basic OpenViBE matrix interface.">IMatrix</a>* l_pMatrix = m_oSpectrumDecoder.getOutputMinMaxFrequencyBands();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Spectrum min/MAX bands received (&quot;</span>&lt;&lt;l_pMatrix-&gt;<a class="code" href="classOpenViBE_1_1IMatrix.html#abf0864b64e042c1cbec5d35a8f30c8e8" title="Gets the total number of elements in the matrix.">getBufferElementCount</a>()&lt;&lt;<span class="stringliteral">&quot; elements in matrix).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Signal)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IMatrix.html" title="Basic OpenViBE matrix interface.">IMatrix</a>* l_pMatrix = m_oSignalDecoder.getOutputMatrix();</div>
<div class="line">                                        <a class="code" href="namespaceOpenViBE.html#a29940ae63ec06c9998bba873e25407ad" title="64 bits unsigned integer">uint64</a> l_uiSamplingFrequency = m_oSignalDecoder.getOutputSamplingRate();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Signal buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;<a class="code" href="classOpenViBE_1_1IMatrix.html#abf0864b64e042c1cbec5d35a8f30c8e8" title="Gets the total number of elements in the matrix.">getBufferElementCount</a>()&lt;&lt;<span class="stringliteral">&quot; elements in buffer) with sampling frequency &quot;</span>&lt;&lt;l_uiSamplingFrequency&lt;&lt;<span class="stringliteral">&quot;Hz.\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Stimulations)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="classOpenViBE_1_1IStimulationSet.html" title="Basic OpenViBE stimulation set interface.">IStimulationSet</a>* l_pStimulations =  m_oStimDecoder.getOutputStimulationSet();</div>
<div class="line">                                        <span class="comment">// as we constantly receive stimulations on the stream, we will check if the incoming set is empty or not</span></div>
<div class="line">                                        <span class="keywordflow">if</span>(l_pStimulations-&gt;<a class="code" href="classOpenViBE_1_1IStimulationSet.html#aadc308caf7e297d468487d56d04c6a22" title="Gets the number of stimulations contained in this stimulation set.">getStimulationCount</a>() != 0)</div>
<div class="line">                                        {</div>
<div class="line">                                                this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Stimulation Set buffer received (1st stim is [&quot;</span>&lt;&lt;l_pStimulations-&gt;<a class="code" href="classOpenViBE_1_1IStimulationSet.html#ad7461a9b24838a780fa6681407802c42" title="Gets the identifier of a specific stimulation in this stimulation set.">getStimulationIdentifier</a>(0)&lt;&lt;<span class="stringliteral">&quot;:&quot;</span>&lt;&lt;this-&gt;getTypeManager().getEnumerationEntryNameFromValue(OV_TypeId_Stimulation, l_pStimulations-&gt;<a class="code" href="classOpenViBE_1_1IStimulationSet.html#ad7461a9b24838a780fa6681407802c42" title="Gets the identifier of a specific stimulation in this stimulation set.">getStimulationIdentifier</a>(0))&lt;&lt;<span class="stringliteral">&quot;]).\n&quot;</span>;</div>
<div class="line">                                                m_oStimEncoder.getInputStimulationSet()-&gt;clear();</div>
<div class="line">                                                m_oStimEncoder.getInputStimulationSet()-&gt;appendStimulation(l_pStimulations-&gt;<a class="code" href="classOpenViBE_1_1IStimulationSet.html#ad7461a9b24838a780fa6681407802c42" title="Gets the identifier of a specific stimulation in this stimulation set.">getStimulationIdentifier</a>(0)+1,l_pStimulations-&gt;<a class="code" href="classOpenViBE_1_1IStimulationSet.html#ac39b477c24b456506291b2ff2518381f" title="Gets the date of a specific stimulation in this stimulation set.">getStimulationDate</a>(0),0);</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_ExperimentationInformation)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="namespaceOpenViBE.html#a29940ae63ec06c9998bba873e25407ad" title="64 bits unsigned integer">uint64</a> l_pXPid = m_oExperimentInformationDecoder.getOutputExperimentIdentifier();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Experiment information buffer received (xp ID: &quot;</span>&lt;&lt;l_pXPid&lt;&lt;<span class="stringliteral">&quot;).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                {</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Error &lt;&lt; <span class="stringliteral">&quot;Undefined input type.\n&quot;</span>;</div>
<div class="line">                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                                }</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeBuffer(i);</div>
<div class="line">                        }</div>
<div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isEndReceived())</div>
<div class="line">                        {</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeEnd(i);</div>
<div class="line">                        }</div>
<div class="line">                        l_rDynamicBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxIO.html#a86a12d874a8db34e5a751dc0e076e340" title="Marks output buffer as &#39;ready to send&#39;.">markOutputAsReadyToSend</a>(i,l_rDynamicBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxIO.html#aa890f7569cc95bfea18d3fffc4336e81" title="Gets an input chunk start time.">getInputChunkStartTime</a>(i, j), l_rDynamicBoxContext.<a class="code" href="classOpenViBE_1_1Kernel_1_1IBoxIO.html#ad2e4cceed339fe531e2b22efcc54d6c3" title="Gets an input chunk end time.">getInputChunkEndTime</a>(i, j));</div>
<div class="line">                }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> <ul>
<li>The first step is initialization:</li>
</ul>
<p><div class="fragment"><div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::initialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <span class="comment">// You can also manipulate pointers to Codec object. Creation and destruction must be done like that :  </span></div>
<div class="line">        TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt; * l_oStreamedMatrixDecoder = <span class="keyword">new</span> TStreamedMatrixDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oStreamedMatrixDecoder;</div>
<div class="line">        TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt; * l_oStreamedMatrixEncoder = <span class="keyword">new</span> TStreamedMatrixEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oStreamedMatrixEncoder;</div>
<div class="line"></div>
<div class="line">        TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt; * l_oChannelLocalisationDecoder = <span class="keyword">new</span> TChannelLocalisationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oChannelLocalisationDecoder;</div>
<div class="line">        TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt; * l_oChannelLocalisationEncoder = <span class="keyword">new</span> TChannelLocalisationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oChannelLocalisationEncoder;</div>
<div class="line"></div>
<div class="line">        TFeatureVectorDecoder &lt; CTestCodecToolkit &gt; * l_oTFeatureVectorDecoder = <span class="keyword">new</span> TFeatureVectorDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTFeatureVectorDecoder;</div>
<div class="line">        TFeatureVectorEncoder &lt; CTestCodecToolkit &gt; * l_oTFeatureVectorEncoder = <span class="keyword">new</span> TFeatureVectorEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTFeatureVectorEncoder;</div>
<div class="line"></div>
<div class="line">        TSpectrumDecoder &lt; CTestCodecToolkit &gt; * l_oTSpectrumDecoder = <span class="keyword">new</span> TSpectrumDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSpectrumDecoder;</div>
<div class="line">        TSpectrumEncoder &lt; CTestCodecToolkit &gt; * l_oTSpectrumEncoder = <span class="keyword">new</span> TSpectrumEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSpectrumEncoder;</div>
<div class="line"></div>
<div class="line">        TSignalDecoder &lt; CTestCodecToolkit &gt; * l_oTSignalDecoder = <span class="keyword">new</span> TSignalDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSignalDecoder;</div>
<div class="line">        TSignalEncoder &lt; CTestCodecToolkit &gt; * l_oTSignalEncoder = <span class="keyword">new</span> TSignalEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTSignalEncoder;</div>
<div class="line"></div>
<div class="line">        TStimulationDecoder &lt; CTestCodecToolkit &gt; * l_oTStimulationDecoder = <span class="keyword">new</span> TStimulationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTStimulationDecoder;</div>
<div class="line">        TStimulationEncoder &lt; CTestCodecToolkit &gt; * l_oTStimulationEncoder = <span class="keyword">new</span> TStimulationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTStimulationEncoder;</div>
<div class="line"></div>
<div class="line">        TExperimentInformationDecoder &lt; CTestCodecToolkit &gt; * l_oTExperimentInformationDecoder = <span class="keyword">new</span> TExperimentInformationDecoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTExperimentInformationDecoder;</div>
<div class="line">        TExperimentInformationEncoder &lt; CTestCodecToolkit &gt; * l_oTExperimentInformationEncoder = <span class="keyword">new</span> TExperimentInformationEncoder &lt; CTestCodecToolkit &gt;(*this);</div>
<div class="line">        <span class="keyword">delete</span> l_oTExperimentInformationEncoder;</div>
<div class="line"></div>
<div class="line">        <span class="comment">//-----------------------------------------------------------------------------------------</span></div>
<div class="line"></div>
<div class="line">        m_oStreamedMatrixDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStreamedMatrixEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStreamedMatrixEncoder.getInputMatrix().setReferenceTarget(m_oStreamedMatrixDecoder.getOutputMatrix());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oStreamedMatrixDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oStreamedMatrixEncoder);</div>
<div class="line"></div>
<div class="line">        m_oChannelLocalisationDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oChannelLocalisationEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oChannelLocalisationEncoder.getInputMatrix().setReferenceTarget(m_oChannelLocalisationDecoder.getOutputMatrix());</div>
<div class="line">        m_oChannelLocalisationEncoder.getInputDynamic().setReferenceTarget(m_oChannelLocalisationDecoder.getOutputDynamic());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oChannelLocalisationDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oChannelLocalisationEncoder);</div>
<div class="line"></div>
<div class="line">        m_oFeatureVectorDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oFeatureVectorEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oFeatureVectorEncoder.getInputMatrix().setReferenceTarget(m_oFeatureVectorDecoder.getOutputMatrix());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oFeatureVectorDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oFeatureVectorEncoder);</div>
<div class="line"></div>
<div class="line">        m_oSpectrumDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSpectrumEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSpectrumEncoder.getInputMatrix().setReferenceTarget(m_oSpectrumDecoder.getOutputMatrix());</div>
<div class="line">        m_oSpectrumEncoder.getInputMinMaxFrequencyBands().setReferenceTarget(m_oSpectrumDecoder.getOutputMinMaxFrequencyBands());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oSpectrumDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oSpectrumEncoder);</div>
<div class="line"></div>
<div class="line">        m_oSignalDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSignalEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oSignalEncoder.getInputMatrix().setReferenceTarget(m_oSignalDecoder.getOutputMatrix());</div>
<div class="line">        m_oSignalEncoder.getInputSamplingRate().setReferenceTarget(m_oSignalDecoder.getOutputSamplingRate());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oSignalDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oSignalEncoder);</div>
<div class="line"></div>
<div class="line">        m_oStimDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStimEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oStimEncoder.getInputStimulationSet().setReferenceTarget(m_oStimDecoder.getOutputStimulationSet());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oStimDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oStimEncoder);</div>
<div class="line"></div>
<div class="line">        m_oExperimentInformationDecoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oExperimentInformationEncoder.initialize(*<span class="keyword">this</span>);</div>
<div class="line">        m_oExperimentInformationEncoder.getInputExperimentIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputExperimentIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputExperimentDate().setReferenceTarget(m_oExperimentInformationDecoder.getOutputExperimentDate());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectName());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectAge().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectAge());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputSubjectGender().setReferenceTarget(m_oExperimentInformationDecoder.getOutputSubjectGender());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputLaboratoryIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputLaboratoryIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputLaboratoryName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputLaboratoryName());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputTechnicianIdentifier().setReferenceTarget(m_oExperimentInformationDecoder.getOutputTechnicianIdentifier());</div>
<div class="line">        m_oExperimentInformationEncoder.getInputTechnicianName().setReferenceTarget(m_oExperimentInformationDecoder.getOutputTechnicianName());</div>
<div class="line">        m_vDecoders.push_back(&amp;m_oExperimentInformationDecoder);</div>
<div class="line">        m_vEncoders.push_back(&amp;m_oExperimentInformationEncoder);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --></p>
<p>During box initialization, we need to call <code>initialize()</code> on every codec. The initialize method needs a <b>reference</b> of the current instance as parameter, in order to be able to create the codec algorithm through the box's algorithm manager. As we want to pass the chunks from the decoders directly to the corresponding encoders, we also set the reference targets. We fill the two vectors on the way.</p>
<ul>
<li>Second step is uninitialization :</li>
</ul>
<p><div class="fragment"><div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::uninitialize(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <span class="keywordflow">for</span>(uint32 i = 0; i&lt; m_vDecoders.size(); i++)</div>
<div class="line">        {</div>
<div class="line">                m_vDecoders[i]-&gt;uninitialize();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span>(uint32 i = 0; i&lt; m_vEncoders.size(); i++)</div>
<div class="line">        {</div>
<div class="line">                m_vEncoders[i]-&gt;uninitialize();</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> We iterate over all decoders and encoders and call <code>uninitialize()</code> on each codec.</p>
<ul>
<li>Now let's take a look at the process loop:</li>
</ul>
<p>We iterate over all input chunks.</p>
<p><div class="fragment"><div class="line"><span class="keywordtype">boolean</span> CTestCodecToolkit::process(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        IBoxIO&amp; l_rDynamicBoxContext=this-&gt;getDynamicBoxContext();</div>
<div class="line">        IBox&amp; l_rStaticBoxContext=this-&gt;getStaticBoxContext();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>(uint32 i=0; i&lt;l_rStaticBoxContext.getInputCount(); i++)</div>
<div class="line">        {</div>
<div class="line">                <span class="keywordflow">for</span>(uint32 j=0; j&lt;l_rDynamicBoxContext.getInputChunkCount(i); j++)</div>
<div class="line">                {</div>
<div class="line">                        <span class="comment">// we can manipulate decoders and encoders without knowing their types</span></div>
</div><!-- fragment --></p>
<p>With a simple call to <code>decode</code>, the input chunk is decoded. We can check its content. <div class="fragment"><div class="line">                        m_vDecoders[i]-&gt;decode(i,j);</div>
</div><!-- fragment --> If the incoming chunk contains a Header, we just ask the corresponding encoder to encode it's own header chunk. <div class="fragment"><div class="line"></div>
<div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isHeaderReceived())</div>
<div class="line">                        {</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeHeader(i);</div>
<div class="line">                        }</div>
</div><!-- fragment --> If a buffer is received, we check its content in order to print some information in the console. Based on the input type, we know which decoder is involved. We can access its output(s) by calling the corresponding getOutputXXX methods (check the <a class="el" href="Doc_Tutorial_Developer_SignalProcessing_CodecToolkit_Ref.html">reference page</a> for a complete listing). <div class="fragment"><div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isBufferReceived())</div>
<div class="line">                        {</div>
<div class="line">                                <span class="comment">//let&#39;s check what is inside the buffer</span></div>
<div class="line">                                CIdentifier l_oInputType;</div>
<div class="line">                                l_rStaticBoxContext.getInputType(i, l_oInputType);</div>
<div class="line">                                <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_StreamedMatrix)</div>
<div class="line">                                {</div>
<div class="line">                                        IMatrix* l_pMatrix = m_oStreamedMatrixDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Streamed Matrix buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;getBufferElementCount()&lt;&lt;<span class="stringliteral">&quot; elements in buffer).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_ChannelLocalisation)</div>
<div class="line">                                {</div>
<div class="line">                                        IMatrix* l_pMatrix = m_oChannelLocalisationDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Channel localisation buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;getBufferElementCount()&lt;&lt;<span class="stringliteral">&quot; elements in buffer).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_FeatureVector)</div>
<div class="line">                                {</div>
<div class="line">                                        IMatrix* l_pMatrix = m_oFeatureVectorDecoder.getOutputMatrix();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Feature Vector buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;getBufferElementCount()&lt;&lt;<span class="stringliteral">&quot; features in vector).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Spectrum)</div>
<div class="line">                                {</div>
<div class="line">                                        IMatrix* l_pMatrix = m_oSpectrumDecoder.getOutputMinMaxFrequencyBands();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Spectrum min/MAX bands received (&quot;</span>&lt;&lt;l_pMatrix-&gt;getBufferElementCount()&lt;&lt;<span class="stringliteral">&quot; elements in matrix).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Signal)</div>
<div class="line">                                {</div>
<div class="line">                                        IMatrix* l_pMatrix = m_oSignalDecoder.getOutputMatrix();</div>
<div class="line">                                        <a class="code" href="namespaceOpenViBE.html#a29940ae63ec06c9998bba873e25407ad" title="64 bits unsigned integer">uint64</a> l_uiSamplingFrequency = m_oSignalDecoder.getOutputSamplingRate();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Signal buffer received (&quot;</span>&lt;&lt;l_pMatrix-&gt;getBufferElementCount()&lt;&lt;<span class="stringliteral">&quot; elements in buffer) with sampling frequency &quot;</span>&lt;&lt;l_uiSamplingFrequency&lt;&lt;<span class="stringliteral">&quot;Hz.\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_Stimulations)</div>
<div class="line">                                {</div>
<div class="line">                                        IStimulationSet* l_pStimulations =  m_oStimDecoder.getOutputStimulationSet();</div>
<div class="line">                                        <span class="comment">// as we constantly receive stimulations on the stream, we will check if the incoming set is empty or not</span></div>
<div class="line">                                        <span class="keywordflow">if</span>(l_pStimulations-&gt;getStimulationCount() != 0)</div>
<div class="line">                                        {</div>
<div class="line">                                                this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Stimulation Set buffer received (1st stim is [&quot;</span>&lt;&lt;l_pStimulations-&gt;getStimulationIdentifier(0)&lt;&lt;<span class="stringliteral">&quot;:&quot;</span>&lt;&lt;this-&gt;getTypeManager().getEnumerationEntryNameFromValue(OV_TypeId_Stimulation, l_pStimulations-&gt;getStimulationIdentifier(0))&lt;&lt;<span class="stringliteral">&quot;]).\n&quot;</span>;</div>
<div class="line">                                                m_oStimEncoder.getInputStimulationSet()-&gt;clear();</div>
<div class="line">                                                m_oStimEncoder.getInputStimulationSet()-&gt;appendStimulation(l_pStimulations-&gt;getStimulationIdentifier(0)+1,l_pStimulations-&gt;getStimulationDate(0),0);</div>
<div class="line">                                        }</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(l_oInputType==OV_TypeId_ExperimentationInformation)</div>
<div class="line">                                {</div>
<div class="line">                                        <a class="code" href="namespaceOpenViBE.html#a29940ae63ec06c9998bba873e25407ad" title="64 bits unsigned integer">uint64</a> l_pXPid = m_oExperimentInformationDecoder.getOutputExperimentIdentifier();</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Info &lt;&lt; <span class="stringliteral">&quot;Experiment information buffer received (xp ID: &quot;</span>&lt;&lt;l_pXPid&lt;&lt;<span class="stringliteral">&quot;).\n&quot;</span>;</div>
<div class="line">                                }</div>
<div class="line">                                <span class="keywordflow">else</span></div>
<div class="line">                                {</div>
<div class="line">                                        this-&gt;getLogManager() &lt;&lt; LogLevel_Error &lt;&lt; <span class="stringliteral">&quot;Undefined input type.\n&quot;</span>;</div>
<div class="line">                                        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">                                }</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeBuffer(i);</div>
<div class="line">                        }</div>
</div><!-- fragment --> If a End is received we just pass it to the corresponding encoder. <div class="fragment"><div class="line">                        <span class="keywordflow">if</span>(m_vDecoders[i]-&gt;isEndReceived())</div>
<div class="line">                        {</div>
<div class="line">                                m_vEncoders[i]-&gt;encodeEnd(i);</div>
<div class="line">                        }</div>
</div><!-- fragment --> Finally, we mark the output has ready to send, with correct chunk timing. <div class="fragment"><div class="line">                        l_rDynamicBoxContext.markOutputAsReadyToSend(i,l_rDynamicBoxContext.getInputChunkStartTime(i, j), l_rDynamicBoxContext.getInputChunkEndTime(i, j));</div>
</div><!-- fragment --></p>
<h1><a class="anchor" id="Doc_Tutorial_Developer_SignalProcessing_CodecToolkit_ConsDestr"></a>
About Constructors and Destructors</h1>
<p>You can manipulate encoders and decoders easily, as long as you <b>initialize</b> and <b>uninitialize</b> it on the way. The safe practice has been described in this tutorial, as presented in the <code>CTestCodecToolkit</code> class, and should always be followed. If not possible, here is what you can expect from the codec classes :</p>
<ul>
<li><b>Default constructor</b> : the codec is declared, but not initialized</li>
<li><b>TUsefulCodec(T&amp; rBoxAlgorithm)</b> : the codec is declared &lt;u&gt;and initialized&lt;/u&gt;</li>
<li><b>Destructor</b> : uninitializes the codec</li>
<li><b>initialize(T&amp; rBoxAlgorithm)</b> : manually initializes the codec. Does nothing if already initialized.</li>
<li><b>uninitialize()</b> : manually uninitializes the codec. Does nothing if already uninitialized.</li>
</ul>
<h1><a class="anchor" id="Doc_Tutorial_Developer_SignalProcessing_Conclusion"></a>
Conclusion</h1>
<p>The Codec Toolkit provides an easy and simple way to use the stream decoders and encoders in <a class="el" href="namespaceOpenViBE.html" title="Main OpenViBE namespace.">OpenViBE</a>. These algorithms are by far the most used when it comes to plugin implementation, and we hope this toolkit will help any futur developement !</p>
<p>For any further question, please refer to the <a class="el" href="Doc_Tutorial_Developer_SignalProcessing_CodecToolkit_Ref.html">Codec Toolkit Reference page</a>, or visit us on the forum ! </p>
</div></div><!-- contents -->
	</div>
	<div class='clear-both'></div>
	<div id="footer">
		<center>
		<table width=95%>
			<tr>
				<td style="text-align:left;"><a href="#page-top">Back to top</a></td>
				<td style="text-align:right;">Generated on Fri Sep 26 2014 00:47:34 for Documentation by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.1.2</td>
			</tr>
		</table>
		</center>
	</div>
</div>
</body>
</html>
