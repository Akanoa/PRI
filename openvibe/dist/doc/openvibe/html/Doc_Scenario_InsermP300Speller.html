<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OpenViBE documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<!-- <link href="tabs.css" rel="stylesheet" type="text/css"> -->
</head>
<body>
<div id="main">
	<div id="title">
		<center>
		<a name="page-top"></a>
		<table width=95%>
			<tr>
				<td><a href="http://openvibe.inria.fr" class="leaving-link" onclick="window.open(this.href,'openvibe-software'); return false;"><img src="logo.png" /></a></td>
				<td width=100%>OpenViBE Documentation</td>
			</tr>
		</table>
		</center>
	</div>
	<div id="menu">
		<div id="menu-content">
			<ul>
				<li><a href="index.html">OpenViBE Documentation</a></li>
			</ul>
			<div class="menu-title">Doxygen</div>
			<ul>
				<!-- <li><a href="pages.html">Related</a></li> -->
				<li><a href="modules.html">Modules</a></li>
				<li><a href="namespaces.html">Namespaces</a></li>
				<li><a href="annotated.html">Class List</a>
				<li><a href="classes.html">Class Index</a>
				<li><a href="hierarchy.html">Class Hierarchy</a>
				<!-- <li><a href="files.html">Files (buggy)</a></li> -->
			</ul>
			<div class="menu-title">Quick Access</div>
			<ul>
				<li><a href="http://openvibe.inria.fr/start" class="leaving-link">Video Tutorials</a></li>
				<li><a href="http://openvibe.inria.fr/faq">FAQ</a></li>
				<li><a href="http://openvibe.inria.fr/license">Licence</a></li>
				<li><a href="http://openvibe.inria.fr/build-instructions/">Build Instructions</a></li>
				<li><a href="http://openvibe.inria.fr/documentation-index/#User+Documentation">User Doc</a></li>
				<li><a href="http://openvibe.inria.fr/documentation-index/#Developer+Documentation">Developer Doc</a></li>
				<li><a href="Doc_BoxAlgorithms.html">Exisiting Boxes</a></li>
			</ul>
			<div class="menu-title">Contact</div>
			<ul>
				<li><a href="http://openvibe.inria.fr" class="leaving-link" onclick="window.open(this.href,'openvibe-software'); return false;">Software Home</a></li>
				<li><a href="http://openvibe.inria.fr/forum" class="leaving-link" onclick="window.open(this.href,'openvibe-forum'); return false;">Forum</a></li>
				<li><a href="https://gforge.inria.fr/projects/openvibe" class="leaving-link" onclick="window.open(this.href,'openvibe-forge'); return false;">INRIA gForge</a></li>
				<li><a href="https://gforge.inria.fr/mail/?group_id=276" class="leaving-link" onclick="window.open(this.href,'openvibe-forge'); return false;">Mailing Lists</a></li>
				<li><a href="http://openvibe.inria.fr/tracker" class="leaving-link" onclick="window.open(this.href,'openvibe-tracker'); return false;">Bug Tracker</a></li>
				<li><a href="http://www.irisa.fr/bunraku/OpenViBE/wiki/index.php?title=Main_Page" class="leaving-link" onclick="window.open(this.href,'openvibe-wiki'); return false;">Research Project</a></li>
				<li><b>IRC</b> : <span style="font-size: x-small; font-style: italic;">#openvibe</span> on <span style="font-size: x-small; font-style: italic;">irc.freenode.net</span></li>
				<li><b>Project Leader</b> : Anatole L&eacute;cuyer, Inria <span style="font-size: x-small; font-style: italic;">(anatole dot lecuyer at inria dot fr)</span></li>
				<li><b>Lead Software Engineer</b> : Laurent Bonnet, Inria <span style="font-size: x-small; font-style: italic;">(laurent dot bonnet at inria dot fr)</span></li>
			</ul>
			<div class="menu-title">Share this</div>
			<ul><li><span style="font-size: x-small; font-style: italic;">This documentation is licenced under <b>CC-BY-SA</b></span></li></ul>
			<td><a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode" class="leaving-link" onclick="window.open(this.href,'cc-by-sa'); return false;"><img src="cc-by-sa.png" /></a></td>
			<br>
			<div class="menu-title">Search</div>
			<form action="search.php" method="get" id="search">
				<fieldset>
					<input class="search" type="text" name="q" value="Quick Search..." onfocus="this.value='';" />
				</fieldset>
			</form>
		</div>
	</div>
	<div class="content-container">
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="Doc_UserDocumentation.html">User Documentation</a></li><li class="navelem"><a class="el" href="Doc_Scenario.html">Existing scenarios</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The Inserm P300-speller </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>NOTE:</b> this demo application has been removed of the supported release because of the problems users encountered reproducing the setup. The sources can still be found from the svn repository at the following URL : </p>
<pre class="fragment">svn co svn://scm.gforge.inria.fr/svn/openvibe/deprecated-branches/openvibe-applications-p300-speller-wip-ggibert
</pre><p> In case of problem, please contact the original authors.</p>
<p>Meanwhile, the <em>p300-speller</em> and <em>p300-speller-xDAWN</em> scenarios included in the <em>share/openvibe-scenarios/bci</em> can be used for the same purpose.</p>
<h1><a class="anchor" id="Doc_Scenario_InsermP300Speller_Principle"></a>
Principle :</h1>
<p>The user focuses attention on one of the 36 character cells of a 6 x 6 matrix while each row and column of the matrix is intensified in a random sequence. The row and column intensifications that intersect at the attended cell represent the target stimuli, which occur with a probability of 1/6. The rare presentation of the target stimuli in the random sequence of stimuli constitutes an Oddball Paradigm and will elicit a P300 response to the target stimuli. With proper P300 feature selection and classification, the attended character of the matrix can be identified and communicated.</p>
<h1><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol"></a>
Protocol :</h1>
<h2><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step1"></a>
1st step: Training phase</h2>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step1_Stimulation"></a>
Stimulation</h3>
<ul>
<li>6 x 6 matrix of letters (a-z), numbers (1-9) and symbol ( _ )</li>
<li>Off-line mode, i.e. the subject was instructed to focus his attention on the current target symbol (which was displayed in between brackets next to the target word) and to count the number of times this symbol was intensified. <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image1.png" alt="Doc_Scenario_InsermP300Speller_Image1.png"/>
<div class="caption">
Stimulation matrix for the word SIX with current target S</div></div>
</li>
<li>P300 Speller Stimulator settings :<ul>
<li>Background color: Black (RGB: 0 0 0)</li>
<li>Letter color: grey (RGB: 0.5 0.5 0.5)</li>
<li>Intensification letter color : white (RGB: 1 1 1)</li>
<li>Enhancement letter : + 5 pts</li>
<li>Number lines: 6, Number columns: 6</li>
<li>Flash duration: 80 ms</li>
<li>ISI (Inter Stimulus Interval): 150 ms</li>
<li>Number flash by item: 10</li>
<li>Target stimuli: ex: <em>6V89FCPK47G2QNHE3UY51ZSOA</em>...</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step1_Acquisition"></a>
Data acquisition</h3>
<ul>
<li>Acquisition EEG activity was recorded continuously from 32 active electrodes (actiCap, Brain Products GmbH, Munich), referenced to the nose and grounded to the forehead.</li>
<li>EEG signals were band pass filtered between 0.1-150 Hz, amplified and digitized at a rate of <b><em>100 Hz</em></b></li>
</ul>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step1_OpenViBEScenario"></a>
OpenViBE Scenario</h3>
<ul>
<li>Configuration of Acquisition server<ul>
<li>Select the <em>BrainAmp Scalp EEG driver</em> <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image2.png" alt="Doc_Scenario_InsermP300Speller_Image2.png"/>
</div>
</li>
<li>Select <b>2</b> <em>samples count per send block</em> (in case of an acquisition at 100 Hz)</li>
<li>Configure, in Properties, the <em>Connection host name</em> of the BrainAmp Computer</li>
</ul>
</li>
<li>Select and open the scenario entitled <code>RecordingData2GDF.xml</code> <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image3.png" alt="Doc_Scenario_InsermP300Speller_Image3.png"/>
</div>
</li>
<li>It is composed of :<ul>
<li><em>Acquisition client Box</em>: open a socket to read experiment information, signal, stimulations and channel localization data sent across the network.</li>
<li><em>Temporal filter Box</em>: digitally filter EEG signal with a band-pass filter (Butterworth filter, 0.1-20 Hz, slope 24 dB/octave) <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image4.png" alt="Doc_Scenario_InsermP300Speller_Image4.png"/>
</div>
</li>
<li><em>GDF file writer</em>: dump on disk the filtered EEG data in the standard GDF file format during the Training phase</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step2"></a>
2st step: Learning phase (MATLAB procedure)</h2>
<p>After the training phase of <b>50 letters</b>, the EEG data were saving in GDF format and an offline analysis was done in MATLAB to estimate the settings of a Spatial Filter box and a Classifier box using in the online phase.</p>
<p>The recorded EEG signals contain P300 potentials as well as other brain activities, muscular and/or ocular artifacts leading to a very low signal-to-noise ratio (SNR) of P300 potential. An unsupervised algorithm is proposed to enhance P300 evoked potentials by estimating spatial filters [Rivet 2009].</p>
<p>Among the proposed classifiers for BCIs, Naïve Bayesian classifier is chosen.</p>
<p>As already noticed by Rivet, only a few number of spatial filters is necessary to improve the classification accuracy. Then, to estimate the best training of the spatial filters and the Naive Bayes classifier, a leave-one-out strategy for cross-validation for each using of 1, 2, 3, 4 or 5 spatial filters is estimated by the following MATLAB function (toolbox <b>BIOSIG</b> required) located in <code>/openvibe/matlab/OV_P300</code> :</p>
<div class="fragment"><div class="line"><span class="keyword">function</span> ov_run_learning_p300(WordTrain,TrainGDF)</div>
</div><!-- fragment --><p>with <code>WordTrain</code> is the word (or non-word) of 50 letters and <code>TrainGDF</code> the GDF file containing EEG and stimulations data recorded during training phase.</p>
<p>This function computes also the Spatial Filter and Classifier parameters for different numbers of repetitions (3, 5, 8 or 10 repetitions) and have been saved in the <code>/openvibe/BoxSettings_XML</code> folder.</p>
<p>Finally, the Spatial Filter settings are stored respectably for 10, 8, 5 and 3 repetitions in the following files:</p>
<ul>
<li><code>/openvibe/BoxSettings_XML/P300_SpatialFilters_*_10Rep</code>.xml</li>
<li><code>/openvibe/BoxSettings_XML/P300_SpatialFilters_*_8Rep</code>.xml</li>
<li><code>/openvibe/BoxSettings_XML/P300_SpatialFilters_*_5Rep</code>.xml</li>
<li><code>/openvibe/BoxSettings_XML/P300_SpatialFilters_*_3Rep</code>.xml</li>
</ul>
<p>And the Naïve Bayes classifier settings are stored respectably for 10, 8, 5 and 3 repetitions in the following files:</p>
<ul>
<li><code>/openvibe/BoxSettings_XML/P300_NaiveBayes_Apply_*_10Rep</code>.bin</li>
<li><code>/openvibe/BoxSettings_XML/P300_NaiveBayes_Apply_*_8Rep</code>.bin</li>
<li><code>/openvibe/BoxSettings_XML/P300_NaiveBayes_Apply_*_5Rep</code>.bin</li>
<li><code>/openvibe/BoxSettings_XML/P300_NaiveBayes_Apply_*_3Rep</code>.bin</li>
</ul>
<h2><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step3"></a>
3rd step: OnLine phase</h2>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step3_Stimulation"></a>
Stimulation</h3>
<ul>
<li>6 x 6 matrix of letters (a-z), numbers (1-9) and symbol (_ )</li>
<li>On-line mode, i.e. the subject was instructed to focus his attention on the desired symbol and to count the number of times this symbol was intensified.</li>
<li>After all flashes were presented, the stimulator presents the symbol selected by the <a class="el" href="namespaceOpenViBE.html" title="Main OpenViBE namespace.">OpenViBE</a> P300 Speller scenario via a VRPN protocol.</li>
<li>P300 Speller Stimulator settings:<ul>
<li>Mode: online</li>
<li>Background color: Black (RGB: 0 0 0)</li>
<li>Letter color: grey (RGB: 0.5 0.5 0.5)</li>
<li>Intensification letter color : white (RGB: 1 1 1)</li>
<li>Enhancement letter : + 5 pts</li>
<li>Number lines: 6, Number columns: 6</li>
<li>Flash duration: 80 ms</li>
<li>ISI (Inter Stimulus Interval): 150 ms</li>
<li>Number flash by item: 10</li>
<li>VRPN peripheral name: openvibe-vrpn-machine.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step3_Acquisition"></a>
Data Acquisition:</h3>
<ul>
<li>Identical to the Learning phase</li>
</ul>
<h3><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_Step3_OpenViBEScenario"></a>
OpenViBE scenario:</h3>
<ul>
<li>Configuration of Acquisition server : Identical to the Learning phase</li>
<li>Select and open the scenario entitled <code>P300_OnLine_SF_NB_10rep.xml</code> </li>
</ul>
<div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image5.png" alt="Doc_Scenario_InsermP300Speller_Image5.png"/>
</div>
<ul>
<li>It is composed of:<ul>
<li><em>Acquisition client Box</em>: identical to the learning phase settings</li>
<li><em>Channel selector Box</em>: restrict outgoing signal data to a subset data based on a list of channels, ie select only the 32 EEG channels in a case for which there are supplementary channels such as EOG.</li>
<li><em>Temporal Filter Box</em>: digitally filter EEG signal with a band-pass filter (Butterworth filter, 0.1-20 Hz, slope 24 dB/octave)</li>
<li><em>Spatial Filter Box</em>: apply a matrix which represents the spatial pattern determined by a method for producing enhanced EEG information related to a selected brain activity. In this scenario, the matrix was computed by the previous step (2nd step: Matlab procedure) and stored in the XML file <code>P300_SpatialFilters_*_*Rep</code>.xml. <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image6.png" alt="Doc_Scenario_InsermP300Speller_Image6.png"/>
</div>
</li>
<li><em>Stimulation based epoching Box</em>: generates epochs upon reception of a given stimulation. In this scenario, the Epoch duration is equal to 600 ms without epoch offset. Moreover, 6 epoching boxes for stimulation sent when a row was intensified are used with Stimulation Label named at <code>OVTK_StimulationId_Label_01</code> to and <code>OVTK_StimulationId_Label_06</code>. For the columns, 6 other epoching boxes with Stimulation Label named at <code>OVTK_StimulationId_Label_07</code> to and <code>OVTK_StimulationId_Label_0C</code> (<code>OVTK_StimulationId_Label_0A</code>, <code>OVTK_StimulationId_Label_0B</code>, <code>OVTK_StimulationId_Label_0C</code> correspond respectively to <code>Label_10</code>, <code>Label_11</code> and <code>Label_12</code>). <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image7.png" alt="Doc_Scenario_InsermP300Speller_Image7.png"/>
</div>
</li>
<li><em>Epoch average Box</em>: average a number of epochs fixed in Epoch count setting. In the P300 Speller scenario, the Epoch count corresponds to the number of repetitions fixed in settings file of the P300 speller stimulator, in this case, 10 repetitions. <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image8.png" alt="Doc_Scenario_InsermP300Speller_Image8.png"/>
</div>
</li>
<li><em>Linear Naïve Bayes Apply Box</em>: process a Linear Naïve Bayes analysis on time samples of averaged signals computed by <em>Epoch average Box</em>. One box is used to detect which is the intensified row that evokes a P300 response and another box for the column. Each box has 6 inputs connected to the output of the 6 Epoch average boxes. This box contains a Linear Naïve Bayes apply algorithms for each input. The Linear Naïve Bayes classifier settings were computed by the previous step (2nd step: Matlab procedure) and stored in the BIN file <code>P300_NaiveBayes_Apply_*_*Rep</code>.bin. <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image9.png" alt="Doc_Scenario_InsermP300Speller_Image9.png"/>
</div>
</li>
<li><em>Analog VRPN Sever Box</em>: creates VRPN analog servers to send data to VRPN client application configured in the P300 Speller Stimulator. It has 2 inputs; one was connected to the Linear Naïve Bayes Box output for the rows and the other one for the columns. <div class="image">
<img src="Doc_Scenario_InsermP300Speller_Image10.png" alt="Doc_Scenario_InsermP300Speller_Image10.png"/>
</div>
 The peripheral name is the same chosen in the P300 Speller Stimulator settings.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="Doc_Scenario_InsermP300Speller_Protocol_References"></a>
References</h2>
<p>Rivet, B.; Souloumiac, A.; Attina, V. &amp; Gibert, G. xDAWN Algorithm to Enhance Evoked Potentials: Application to Brain Computer Interface IEEE Transactions on, 2009, 1-1 </p>
</div></div><!-- contents -->
	</div>
	<div class='clear-both'></div>
	<div id="footer">
		<center>
		<table width=95%>
			<tr>
				<td style="text-align:left;"><a href="#page-top">Back to top</a></td>
				<td style="text-align:right;">Generated on Fri Sep 26 2014 00:47:34 for Documentation by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.1.2</td>
			</tr>
		</table>
		</center>
	</div>
</div>
</body>
</html>
